---
title: "Introduction"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

When creating R markdown websites, I often find myself wanting to organise content into a nice-looking grid of links. For example, in a recent project I wanted something like this:

```{r, echo=FALSE}
slides <- data.frame(
  messy_title = c("Starting R markdown", "Starting ggplot2", "Starting programming"),
  clean_title = c("starting-rmarkdown", "starting-ggplot2", "starting-programming"),
  description = c("An introduction to R markdown. The target audience is a novice R user with no previous experience with markdown.", "An introduction to ggplot2. The target audience is a novice user with no previous experience with R or ggplot2.", text = "This is primarily a tutorial on making generative art in R, but in doing so introduces core programming constructs and data structures. It is assumed the user has some previous experience with ggplot2.")
  )

bs4cards::cards(
    data = slides,
    title = messy_title,
    text = description,
    link = paste0("https://slides.djnavarro.net/", clean_title),
    image = paste0("https://slides.djnavarro.net/index_img/", clean_title, ".png"),
    width = "wide"
  )
```

The goal of bs4cards is to make this task a little easier inside an R markdown document or website. 

## Enabling bootstrap 4

The first step in using the package is to make sure that your R markdown document uses version 4 of bootstrap: the `bs4cards` package takes its name from the [cards](https://getbootstrap.com/docs/4.5/components/card/) system introduced in bootstrap version 4, and will not work properly if used in R markdown documents that rely on bootstrap version 3, or don't use bootstrap at all. To ensure that you are using bootstrap 4, you need to edit the YAML header for your document to specify which version of bootstrap you want to use. The instructions are slightly different depending on what kind of document you're creating:

### Vanilla R markdown

For a plain R markdown document or website (i.e., one where the output format is `html_document`) here is the relevant section of YAML you might use:

```
output:
  html_document:
    theme:
      version: 4
```

This overrides the R markdown defaults [@rmarkdown] to ensure that the output is built using [bootstrap 4.5](https://getbootstrap.com/docs/4.5/getting-started/introduction/). 

### Pkgdown

To enable bootstrap 4 in a pkgdown site, the process is similar but not identical. Edit the `_pkgdown.yml` file to include the following

```
template:
  bootstrap: 4
```

Note that this relies on a currently-in-development feature, so you may need to update to the development version of pkgdown to make this work.


### Distill (experimental!!!)

Distill R markdown does not use bootstrap, which is a little inconvenient if you want to use bs4cards with distill. With a little effort it is possible to enable the entire bootstrap library in a distill site, but this can lead to undesirable side-effects because bootstrap has a lot of styling that doesn't look visually appealing when mixed with the distill styling.^[The original version of this post used that solution, with a promissory note to do a better job later.] To fix this, bs4cards includes a stripped down version of bootstrap called "strapless", that only uses the subset of bootstrap css relevant to cards. The convenience function `use_strapless()` will copy the strapless css file to the target location. To copy it to the same location as this post:

```{r, eval=FALSE}
bs4cards::use_strapless(here::here("_posts", "bs4cards-in-distill"))
```

Next, to enable the library within the post, add the following lines to the YAML header for the post:

```
output:
  distill::distill_article:
    css: "strapless.css"
```

Alternatively, if you want to enable strapless for the entire site, this markup goes in the `_site.yml` file and the css file should go in the home folder for the project.

Once that's done you should be ready to go! However, please be careful: this is an experimental feature and has not yet been properly tested.


## Building bootstrap cards

The main function in bs4cards is `cards()`. It takes a data frame as the first argument, generally the data set from which the bootstrap cards are to be constructed. In the example at the top of this vignette I used a simple data frame called `slides`:

```{r}
slides
```

Each row in this data frame corresponds to one card in the grid, and the columns are used to construct the card. For example to create the card grid shown at the start of the vignette, I needed to the `title` for each card, the `text` printed below it, the `image` decorating the card, and the URL to which the title and image in each card should `link`. Each of these is an argument to `cards()`, and for each argument you can pass an expression that will be evaluated using the `data` input. To create something very similar to the set of cards depicted at the beginning, you could do something like this:

```{r, message=FALSE}
library(dplyr)
library(bs4cards)

slides %>% 
  cards(
    title = messy_title,
    text = description,
    link = paste0("https://slides.djnavarro.net/", clean_title),
    image = paste0("https://slides.djnavarro.net/index_img/", clean_title, ".png")
  )
```

Note that `link` and `image` are both constructed using the `clean_title` variable from the `slides` data. In my experience this is grossly typical. Usually we try to give files for websites sensible and consistent names, so it's often the case that the same names get reused in a coherent way. By using expressions to construct the links and image paths it's possible to "get away" with a pretty small data frame with only a few variables.


