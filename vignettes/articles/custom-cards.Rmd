---
title: "Customising cards"
---

```{r, include = FALSE, message=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
library(tibble)
```


In this article I'll provide an overview of the various arguments to `cards()`, and how they can be used to customise the look and feel of a card grid, using the built in `galleries` data.

```{r}
library(bs4cards)
galleries
```


## Anatomy of a card

Conceptually, a card is comprised of five major parts:

- The *card image* is controlled by the `image` argument, which should specify the path to the image file to be displayed in each card. As a general principle, bs4cards does not distort the appearance of an image: it is not cropped, nor does it alter the aspect ratio. The only thing it will do is rescale the size of the image as the size of the browser window changes. The image can be omitted by setting `image = NULL`. The exact positioning of the image depends on the card layout (discussed below).

- The *card label* has two parts, the `title` and the `text`, whose values should be character strings specifying the text to be displayed. As long as one or both of these arguments are specified, the card will have a label. The title is always displayed above the text, and the size of the label is adjusted flexibly as the screen size changes. The constituent parts can be omitted by setting `title = NULL` and/or `text = NULL`. The exact positioning of the label depends on the card layout (discussed below).

- The *card link* is controlled by the `link` argument, which should specify the url to be opened when the user selects the card. The link itself does not occupy any space: if it exists, then it is applied to both the image and the card title. The link can be omitted by setting `link = NULL`

- The *card footer* is controlled by the `footer` argument, which should specify text that will displayed at the bottom of the card (it always appears at the bottom regardless of what layout is adopted). The footer text is displayed in muted colours and is intended for the display of ancillary information. Some care is required when using footers, discussed later in the article. To omit footers, set `footer = NULL`.

- The *card header* is analogous to the footer, and is controlled by the `header` argument. The only difference is that the header appears at the top of the card. This is rarely a useful thing to do, and while the bs4cards package does allow it, a lot of care is required (discussed later). In most cases no header is needed, in which case the default `header = NULL` is appropriate.

The different parts are illustrated in the example below:

```{r}
galleries %>% 
  cards(
    title = long_name,
    text = blurb,
    link = gallery_url,
    image = image_url,
    footer = date
  )
```


## Layout of a card

The bs4cards package supports a total eight different `layout` formats. First, there are two vertical layouts and two horizontal layouts:

- Setting `layout = "label-below"` places the label below the image (the default)
- Setting `layout = "label-above"` places the label above the image
- Setting `layout = "label-left"` places the label to the left of the image
- Setting `layout = "label-right"` places the label to the right of the image

Some examples:

```{r}
galleries %>% 
  cards(
    title = long_name,
    link = gallery_url,
    image = image_url,
    layout = "label-above"
  )
```

```{r}
galleries %>% 
  cards(
    title = long_name,
    link = gallery_url,
    image = image_url,
    text = blurb,
    layout = "label-right",
    width = 4
  )
```

(Notice that I set `width = 4` for the horizontal card. Horizontal layouts tend to need more horizontal space, especially when the label includes text as well as a title. The width of the cards is controlled by the `width` argument, and I'll talk more about it later)

In addition there are two "singleton" layouts:

- Setting `layout = "label-only"` includes a label but no image
- Setting `layout = "image-only"` includes an image but no label

As a convenience, the `cards()` function will detect when the user has not specified a label (or image) and will choose the appropriate layout automatically:

```{r}
galleries %>% 
  cards(
    link = gallery_url,
    image = image_url
  )
```


Finally there are two "inset" layouts, in which the label is displayed as an overlay on top of the image. These two layouts are experimental, and I wouldn't advise using them just yet. But if you want to try...

- Setting `layout = "inset-top"` places the label at the top of the image
- Setting `layout = "inset-bottom"` places the label at the bottom of the image

```{r}
galleries %>% 
  cards(
    title = long_name,
    text = blurb,
    link = gallery_url,
    image = image_url,
    layout = "inset-top"
  )
```



## Filtering cards by category

It is possible to assign each card to a set of `tags`, and allow the user to select which tag will be displayed. At the moment, the only user interface option that bs4cards supports is buttons (other options such as dropdown lists may be supported later). If the `tags` argument is specified, labelled buttons will appear at the top of the card deck. Clicking on a button will show the cards that possess the corresponding tag. Cards are allowed to possess multiple tags: the list of tags should be a single string, with spaces separating each tag. For example, in the `galleries` data the `paintbrushes` variable contains names of some of the packages used in creating the art. For the "Native Flora" system, the "paintbrushes" were ggplot2 and the flametree package, so the relevant tag string is `"ggplot2 flametree"`. Each of these tags is associated with a button, as the example below illustrates:

```{r}
galleries %>% 
  cards(
    title = long_name,
    text = blurb,
    link = gallery_url,
    image = image_url,
    tags = paste("all", paintbrushes),
    width = 4,
    footer = paintbrushes,
    layout = "label-right"
  )
```

Notice that I used `paste()` to ensure that there is an `"all"` category, to which every card belongs. That way, if the user clicks on the associated button it will show every card.

## Card width

There are four pre-specified width settings, numbered from 1 to 5. All are responsive widths, and will resize the cards and change the number of columns depending on the size of the display device. To provide a sense of how each setting behaves, try resizing the window and seeing how these cards behave:

```{r, results='hold', message=FALSE}
cards(data = galleries[1,], image = image_url, width = 1)
cards(data = galleries[1,], image = image_url, width = 2)
cards(data = galleries[1,], image = image_url, width = 3)
cards(data = galleries[1,], image = image_url, width = 4)
cards(data = galleries[1,], image = image_url, width = 5)
```

## Card spacing

To modify the separation between cards, use the `spacing` argument. Currently this argument is numeric, and takes a number between 0 and 5. At `spacing = 0`, all spacing between cards is removed:

```{r, message=FALSE}
cards(data = galleries, image = image_url, spacing = 0)
```

At `spacing = 5` there is a lot of room between cards:

```{r, message=FALSE}
cards(data = galleries, image = image_url, spacing = 5)
```

## Break points


## Card colour

```{r}
galleries %>% 
  cards(
    title = long_name,
    text = blurb,
    link = gallery_url,
    image = image_url,
    label_colour = c("#d6cadd", "white", "#c4d8e2", "white", 
               "white", "white", "white")
  )
```

## Border colour

## Border width

## Corner rounding

## Headers and footers

As mentioned earlier, the bs4cards package allows you to include headers and footers. However, because of the limitations of bootstrap (or possibly my limitations in using it), it's not easy to simultaneously align headers, footers, images, and labels in a way that is clean and responsive regardless of the size of the browser window. As a consequence, they're best suited to cases where you want to discreetly include a small amount of metadata that can be guaranteed to fit on a single line:

```{r}
galleries %>% 
  cards(
    title = long_name,
    text = blurb,
    link = gallery_url,
    image = image_url,
    width = 4,
    footer = paste("packages:", paintbrushes),
    layout = "label-right"
  )
```

When the text is long enough to potentially occupy multiple lines, more care is needed. The vertical space occupied by a header or footer is calculated independently of each other. This means that when the text in the header/footer varies in length, the cards are no longer guaranteed to be equal in height, producing ragged borders in situations where the user would probably prefer card parts of the same type to be aligned with one another. This limitation is most obvious for vertically-oriented cards, and more pronounced for headers than for footers. To my eye at least, these seem visually unappealing:

```{r}
galleries %>% 
  cards(
    title = long_name,
    link = gallery_url,
    image = image_url,
    header = blurb
  )
```

```{r}
galleries %>% 
  cards(
    link = gallery_url,
    image = image_url,
    footer = paste(long_name, blurb, sep = ": "), 
    layout = "image-only"
  )
```

